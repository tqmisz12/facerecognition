{"ast":null,"code":"import _classCallCheck from\"/Users/macintoshhd/Desktop/Udemy-Web-Developer-in-2021/S23_SmartBrain_Front/facerecognitionbrain/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/macintoshhd/Desktop/Udemy-Web-Developer-in-2021/S23_SmartBrain_Front/facerecognitionbrain/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/macintoshhd/Desktop/Udemy-Web-Developer-in-2021/S23_SmartBrain_Front/facerecognitionbrain/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/macintoshhd/Desktop/Udemy-Web-Developer-in-2021/S23_SmartBrain_Front/facerecognitionbrain/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"./App.css\";import Navigation from\"./components/Navigation/Navigation\";import Logo from\"./components/Logo/Logo\";import ImageLinkForm from\"./components/ImageLinkForm/ImageLinkForm\";import Rank from\"./components/Rank/Rank\";import Particles from\"react-particles-js\";import Clarifai from\"clarifai\";import FaceRecognition from\"./components/FaceRecognition/FaceRecognition\";import Signin from\"./components/Signin/Signin\";import Signup from\"./components/Signup/Signup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var app=new Clarifai.App({apiKey:'292242503ba743a5961becb8444d65f9'});var particlesOptions={polygon:{enable:true,type:\"inside\",move:{radius:10}}};var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,password:data.password,entries:data.entries,joined:data.joined}});};_this.calculateFaceLocation=function(data){var clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;var image=document.getElementById(\"inputimage\");var width=Number(image.width);var height=Number(image.height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};};_this.displayFaceBox=function(box){_this.setState({box:box});};_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.onButtonSubmit=function(){_this.setState({imageUrl:_this.state.input});app.models.predict(Clarifai.FACE_DETECT_MODEL,_this.state.input).then(function(response){console.log(response);if(response){fetch('http://localhost:3000/image',{method:'put',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})}).then(function(response){return response.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));});}_this.displayFaceBox(_this.calculateFaceLocation(response));}).catch(function(err){return console.log(err);});console.log(\"click\");};_this.onRouteChange=function(route){if(route===\"signout\"){_this.setState({isSignedIn:false});}else if(route===\"home\"){_this.setState({isSignedIn:true});}_this.setState({route:route});};_this.state={input:\"\",imageUrl:\"\",box:{},route:\"signin\",isSignedIn:false,user:{id:'',name:'',email:'',password:'',entries:0,joined:''}};return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this$state=this.state,isSignedIn=_this$state.isSignedIn,imageUrl=_this$state.imageUrl,route=_this$state.route,box=_this$state.box;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Particles,{className:\"particles\",params:particlesOptions}),/*#__PURE__*/_jsx(Navigation,{isSignedIn:isSignedIn,onRouteChange:this.onRouteChange}),route===\"home\"?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit}),/*#__PURE__*/_jsx(FaceRecognition,{box:box,imageUrl:imageUrl})]}):route===\"signin\"?/*#__PURE__*/_jsx(Signin,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/_jsx(Signup,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/macintoshhd/Desktop/Udemy-Web-Developer-in-2021/S23_SmartBrain_Front/facerecognitionbrain/src/App.js"],"names":["React","Navigation","Logo","ImageLinkForm","Rank","Particles","Clarifai","FaceRecognition","Signin","Signup","app","App","apiKey","particlesOptions","polygon","enable","type","move","radius","loadUser","data","setState","user","id","name","email","password","entries","joined","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","box","onInputChange","event","input","target","value","onButtonSubmit","imageUrl","state","models","predict","FACE_DETECT_MODEL","then","response","console","log","fetch","method","headers","body","JSON","stringify","json","count","Object","assign","catch","err","onRouteChange","route","isSignedIn","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport Navigation from \"./components/Navigation/Navigation\";\nimport Logo from \"./components/Logo/Logo\";\nimport ImageLinkForm from \"./components/ImageLinkForm/ImageLinkForm\";\nimport Rank from \"./components/Rank/Rank\";\nimport Particles from \"react-particles-js\";\nimport Clarifai from \"clarifai\";\nimport FaceRecognition from \"./components/FaceRecognition/FaceRecognition\";\nimport Signin from \"./components/Signin/Signin\";\nimport Signup from \"./components/Signup/Signup\";\n\nconst app = new Clarifai.App({\n  apiKey: '292242503ba743a5961becb8444d65f9',\n});\n\nconst particlesOptions = {\n  polygon: {\n    enable: true,\n    type: \"inside\",\n    move: {\n      radius: 10,\n    },\n  },\n};\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      input: \"\",\n      imageUrl: \"\",\n      box: {},\n      route: \"signin\",\n      isSignedIn: false,\n      user: {\n        id: '',\n        name: '',\n        email: '',\n        password: '',\n        entries: 0,\n        joined: ''\n      }\n    };\n  }\n\n  loadUser = (data) => {\n    this.setState({\n      user: {\n        id: data.id,\n        name: data.name,\n        email: data.email,\n        password: data.password,\n        entries: data.entries,\n        joined: data.joined\n      }\n    })\n  }\n\n  // componentDidMount() {\n  //   fetch('http://localhost:3000')\n  //     .then(response => response.json())\n  //     .then(console.log)\n  // }\n\n\n\n  calculateFaceLocation = (data) => {\n    const clarifaiFace =\n      data.outputs[0].data.regions[0].region_info.bounding_box;\n    const image = document.getElementById(\"inputimage\");\n    const width = Number(image.width);\n    const height = Number(image.height);\n    return {\n      leftCol: clarifaiFace.left_col * width,\n      topRow: clarifaiFace.top_row * height,\n      rightCol: width - clarifaiFace.right_col * width,\n      bottomRow: height - clarifaiFace.bottom_row * height,\n    };\n  };\n\n  displayFaceBox = (box) => {\n    this.setState({ box: box });\n  };\n\n  onInputChange = (event) => {\n    this.setState({ input: event.target.value });\n  };\n\n  onButtonSubmit = () => {\n    this.setState({ imageUrl: this.state.input });\n    app.models\n      .predict(Clarifai.FACE_DETECT_MODEL, this.state.input)\n      .then(response => {\n        console.log(response)\n        if (response) {\n          fetch('http://localhost:3000/image', {\n            method: 'put',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              id: this.state.user.id,\n            })\n          })\n            .then(response => response.json())\n            .then(count => {\n              this.setState(Object.assign(this.state.user, { entries: count }))\n            })\n        }\n        this.displayFaceBox(this.calculateFaceLocation(response))\n      })\n      .catch((err) => console.log(err));\n\n    console.log(\"click\");\n  };\n\n  onRouteChange = (route) => {\n    if (route === \"signout\") {\n      this.setState({ isSignedIn: false });\n    } else if (route === \"home\") {\n      this.setState({ isSignedIn: true });\n    }\n    this.setState({ route: route });\n  };\n\n  render() {\n    const { isSignedIn, imageUrl, route, box } = this.state;\n    return (\n      <div className=\"App\">\n        <Particles className=\"particles\" params={particlesOptions} />\n        <Navigation\n          isSignedIn={isSignedIn}\n          onRouteChange={this.onRouteChange}\n        />\n        {route === \"home\" ? (\n          <div>\n            <Logo />\n            <Rank name={this.state.user.name} entries={this.state.user.entries} />\n            <ImageLinkForm\n              onInputChange={this.onInputChange}\n              onButtonSubmit={this.onButtonSubmit}\n            />\n            <FaceRecognition box={box} imageUrl={imageUrl} />\n          </div>\n        ) : route === \"signin\" ? (\n          <Signin loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n        ) : (\n          <Signup loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}